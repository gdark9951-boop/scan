<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cyber HUD Scanner UI</title>
  <style>
    :root{
      --bg0:#04070c;
      --bg1:#07111a;
      --panel: rgba(10, 20, 28, .72);
      --line: rgba(0,245,255,.28);
      --grid: rgba(0,245,255,.10);

      --cyan:#00f5ff;
      --green:#00ff87;
      --purple:#b66bff;
      --yellow:#ffd84d;
      --red:#ff4d6d;

      --text:#d8f3ff;
      --muted:#86b8c9;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 60% 30%, rgba(0,245,255,.12), transparent 55%),
        radial-gradient(900px 550px at 20% 70%, rgba(182,107,255,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow:hidden;
    }

    /* subtle scanline */
    body::before{
      content:"";
      position:fixed; inset:0;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,.02) 0px,
          rgba(255,255,255,.02) 1px,
          transparent 2px,
          transparent 5px
        );
      mix-blend-mode:overlay;
      pointer-events:none;
      opacity:.25;
    }

    /* faint matrix dots */
    body::after{
      content:"";
      position:fixed; inset:-40px;
      background:
        radial-gradient(circle at 10px 10px, rgba(0,245,255,.13) 1px, transparent 2px) 0 0/26px 26px;
      opacity:.12;
      filter: blur(.2px);
      pointer-events:none;
    }

    .frame{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .hud{
      width:min(1100px, 96vw);
      border-radius:18px;
      position:relative;
      background: linear-gradient(180deg, rgba(6,12,18,.70), rgba(4,10,14,.62));
      border:1px solid rgba(0,245,255,.20);
      box-shadow:
        0 0 0 1px rgba(0,245,255,.10) inset,
        0 0 70px rgba(0,245,255,.10),
        0 0 120px rgba(182,107,255,.06);
      overflow:hidden;
    }

    /* glowing border corners */
    .hud::before{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(90deg, rgba(0,245,255,.0), rgba(0,245,255,.24), rgba(0,245,255,.0)) 0 0/100% 2px no-repeat,
        linear-gradient(90deg, rgba(0,245,255,.0), rgba(0,245,255,.18), rgba(0,245,255,.0)) 0 60px/100% 1px no-repeat,
        radial-gradient(400px 180px at 75% 20%, rgba(0,245,255,.18), transparent 65%);
      pointer-events:none;
      opacity:.9;
    }

    .inner{
      padding:26px;
      position:relative;
      z-index:1;
    }

    /* TOP ROW */
    .topRow{
      display:grid;
      grid-template-columns: 1fr 220px;
      gap:18px;
      align-items:center;
      padding:18px 18px;
      border-radius:14px;
      background: rgba(8,16,22,.58);
      border:1px solid rgba(0,245,255,.22);
      box-shadow: 0 0 0 1px rgba(0,245,255,.08) inset;
    }

    .urlBox{
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid rgba(0,245,255,.22);
      background: rgba(3,8,12,.52);
      position:relative;
      overflow:hidden;
    }

    .urlBox::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(90deg, transparent, rgba(0,245,255,.10), transparent);
      transform: translateX(-60%);
      animation: sweep 3.4s linear infinite;
      pointer-events:none;
      opacity:.8;
    }

    @keyframes sweep{
      0%{transform:translateX(-70%)}
      100%{transform:translateX(70%)}
    }

    .label{
      color:var(--cyan);
      font-weight:700;
      letter-spacing:.6px;
      white-space:nowrap;
      display:flex; align-items:center; gap:10px;
      text-transform:uppercase;
    }

    .globe{
      width:18px; height:18px;
      border:1px solid rgba(0,245,255,.65);
      border-radius:50%;
      box-shadow: 0 0 16px rgba(0,245,255,.35);
      position:relative;
    }
    .globe::before,.globe::after{
      content:"";
      position:absolute; inset:3px;
      border:1px solid rgba(0,245,255,.35);
      border-radius:50%;
    }
    .globe::after{ inset:7px; opacity:.7 }

    .urlInput{
      flex:1;
      background: transparent;
      border:0;
      outline:0;
      color:var(--text);
      font-size:15px;
      padding:6px 8px;
      min-width:240px;
    }
    .urlInput::placeholder{color: rgba(215,243,255,.45)}

    .execute{
      height:52px;
      border-radius:12px;
      border:1px solid rgba(0,245,255,.55);
      background: rgba(0,245,255,.10);
      color: var(--cyan);
      font-weight:800;
      letter-spacing:.8px;
      text-transform:uppercase;
      cursor:pointer;
      position:relative;
      overflow:hidden;
      box-shadow:
        0 0 0 1px rgba(0,245,255,.18) inset,
        0 0 24px rgba(0,245,255,.18);
    }
    .execute::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(200px 60px at 50% 0%, rgba(0,245,255,.25), transparent 70%);
      pointer-events:none;
    }
    .execute:hover{
      background: rgba(0,245,255,.14);
      box-shadow:
        0 0 0 1px rgba(0,245,255,.22) inset,
        0 0 40px rgba(0,245,255,.25);
      transform: translateY(-1px);
    }
    .execute:active{transform: translateY(0px) scale(.99)}
    .execute:disabled{
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* BUTTON GRID */
    .grid{
      margin-top:18px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }

    .neo{
      height:62px;
      border-radius:12px;
      background: rgba(6,12,18,.55);
      border:1px solid rgba(0,245,255,.18);
      position:relative;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap:12px;
      padding:0 16px;
      color:var(--text);
      letter-spacing:.4px;
      text-transform:uppercase;
      font-weight:800;
      box-shadow: 0 0 0 1px rgba(255,255,255,.04) inset;
      overflow:hidden;
    }

    .neo::before{
      content:"";
      position:absolute; inset:-2px;
      opacity:.9;
      pointer-events:none;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.06), transparent);
      transform: translateX(-70%);
      animation: sweep2 4.6s linear infinite;
    }
    @keyframes sweep2{
      0%{transform:translateX(-80%)}
      100%{transform:translateX(80%)}
    }

    .neo:hover{filter: brightness(1.05)}
    .neo:active{transform: scale(.995)}
    .neo:disabled{opacity: 0.4; cursor: not-allowed}

    .neo .icon{
      width:28px; height:28px;
      display:grid; place-items:center;
      border-radius:8px;
      background: rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.06);
    }

    /* per-button accent */
    .a-red{ border-color: rgba(255,77,109,.45); box-shadow: 0 0 22px rgba(255,77,109,.14);}
    .a-red .icon{ box-shadow: 0 0 18px rgba(255,77,109,.22); }
    .a-red .title{ color: rgba(255,210,220,.95) }
    .a-red::after{ content:""; position:absolute; inset:0; border-radius:12px; box-shadow: 0 0 0 1px rgba(255,77,109,.20) inset, 0 0 26px rgba(255,77,109,.10); pointer-events:none; }

    .a-green{ border-color: rgba(0,255,135,.45); box-shadow: 0 0 22px rgba(0,255,135,.12);}
    .a-green::after{ content:""; position:absolute; inset:0; border-radius:12px; box-shadow: 0 0 0 1px rgba(0,255,135,.18) inset, 0 0 26px rgba(0,255,135,.10); pointer-events:none; }

    .a-cyan{ border-color: rgba(0,245,255,.45); box-shadow: 0 0 22px rgba(0,245,255,.12);}
    .a-cyan::after{ content:""; position:absolute; inset:0; border-radius:12px; box-shadow: 0 0 0 1px rgba(0,245,255,.16) inset, 0 0 26px rgba(0,245,255,.10); pointer-events:none; }

    .a-purple{ border-color: rgba(182,107,255,.55); box-shadow: 0 0 22px rgba(182,107,255,.12);}
    .a-purple::after{ content:""; position:absolute; inset:0; border-radius:12px; box-shadow: 0 0 0 1px rgba(182,107,255,.18) inset, 0 0 26px rgba(182,107,255,.10); pointer-events:none; }

    .a-yellow{ border-color: rgba(255,216,77,.55); box-shadow: 0 0 22px rgba(255,216,77,.10);}
    .a-yellow::after{ content:""; position:absolute; inset:0; border-radius:12px; box-shadow: 0 0 0 1px rgba(255,216,77,.16) inset, 0 0 26px rgba(255,216,77,.08); pointer-events:none; }

    .title{ font-size:15px }
    .sub{ font-size:12px; color:var(--muted); font-weight:700; letter-spacing:.3px }

    /* LOG PANEL */
    .logPanel{
      margin-top:18px;
      border-radius:14px;
      background: rgba(3,8,12,.58);
      border:1px solid rgba(0,245,255,.18);
      box-shadow: 0 0 0 1px rgba(0,245,255,.08) inset;
      overflow:hidden;
    }

    .logHeader{
      padding:12px 14px;
      display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid rgba(0,245,255,.12);
      background: rgba(8,16,22,.45);
    }

    .logHeader .left{
      display:flex; align-items:center; gap:10px;
      color:var(--cyan);
      font-weight:800;
      letter-spacing:.6px;
      text-transform:uppercase;
    }

    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(0,245,255,.22);
      color: rgba(0,245,255,.92);
      background: rgba(0,245,255,.06);
      font-weight:800;
      font-size:12px;
    }

    .console{
      padding:14px;
      height:240px;
      overflow:auto;
      line-height:1.65;
      font-size:14px;
      color: rgba(210,245,255,.92);
    }

    .line{display:flex; gap:10px; white-space:pre-wrap}
    .ts{color: rgba(0,245,255,.60)}
    .ok{color: var(--cyan); font-weight:900}
    .low{color: var(--green); font-weight:900}
    .med{color: var(--yellow); font-weight:900}
    .crit{color: var(--red); font-weight:900}
    .hint{color: rgba(255,216,77,.92); font-weight:900}

    /* responsive */
    @media (max-width: 980px){
      .topRow{grid-template-columns: 1fr}
      .execute{width:100%}
      .grid{grid-template-columns: 1fr}
      .console{height:260px}
    }
  </style>
</head>

<body>
  <div class="frame">
    <div class="hud">
      <div class="inner">

        <!-- TOP -->
        <div class="topRow">
          <div class="urlBox">
            <div class="label"><span class="globe"></span> TARGET URL >></div>
            <input class="urlInput" id="target" placeholder="https://example.com" value="https://example.com" />
          </div>
          <button class="execute" id="execute">üöÄ [ EXECUTE SCAN ]</button>
        </div>

        <!-- BUTTON GRID -->
        <div class="grid">
          <button class="neo a-red" data-action="msf" disabled>
            <span class="icon">üí•</span>
            <div>
              <div class="title">METASPLOIT STRIKE</div>
              <div class="sub">Unified report</div>
            </div>
          </button>

          <button class="neo a-green" data-action="audit" disabled>
            <span class="icon">üß†</span>
            <div>
              <div class="title">AUDIT COMMANDS</div>
              <div class="sub">Templates & intel</div>
            </div>
          </button>

          <button class="neo a-purple" data-action="diff" disabled>
            <span class="icon">üîç</span>
            <div>
              <div class="title">CONTENT DIFF</div>
              <div class="sub">Anomaly detector</div>
            </div>
          </button>

          <button class="neo a-cyan" data-action="nmap" disabled>
            <span class="icon">üõ∞Ô∏è</span>
            <div>
              <div class="title">NMAP POWER</div>
              <div class="sub">Ports overview</div>
            </div>
          </button>

          <button class="neo a-green" data-action="subs" disabled>
            <span class="icon">üåê</span>
            <div>
              <div class="title">SUBDOMAIN SCAN</div>
              <div class="sub">DNS enumeration</div>
            </div>
          </button>

          <button class="neo a-cyan" data-action="brute" disabled>
            <span class="icon">üîë</span>
            <div>
              <div class="title">BRUTE HELPER</div>
              <div class="sub">Login templates</div>
            </div>
          </button>

          <button class="neo a-purple" data-action="intel" disabled>
            <span class="icon">üìä</span>
            <div>
              <div class="title">SITE INTEL</div>
              <div class="sub">Meta & headers</div>
            </div>
          </button>

          <button class="neo a-purple" data-action="http" disabled>
            <span class="icon">üì°</span>
            <div>
              <div class="title">HTTP DATA</div>
              <div class="sub">Timing & links</div>
            </div>
          </button>

          <button class="neo a-yellow" data-action="save" disabled>
            <span class="icon">üíæ</span>
            <div>
              <div class="title">SAVE REPORT</div>
              <div class="sub">Export to file</div>
            </div>
          </button>
        </div>

        <!-- LOG -->
        <div class="logPanel">
          <div class="logHeader">
            <div class="left">üìü SCAN OUTPUT LOG</div>
            <div class="pill" id="state">READY</div>
          </div>
          <div class="console" id="console"></div>
        </div>

      </div>
    </div>
  </div>

  <script>
    const $ = (s)=>document.querySelector(s);
    const $$ = (s)=>document.querySelectorAll(s);
    const consoleEl = $("#console");
    const stateEl = $("#state");
    const executeBtn = $("#execute");
    const targetInput = $("#target");
    
    let currentResult = null;

    function ts(){
      const d = new Date();
      const hh = String(d.getHours()).padStart(2,"0");
      const mm = String(d.getMinutes()).padStart(2,"0");
      const ss = String(d.getSeconds()).padStart(2,"0");
      return `[${hh}:${mm}:${ss}]`;
    }

    function addLine(text, cls=""){
      const div = document.createElement("div");
      div.className = "line";
      const escapedText = text.replace(/</g, "&lt;").replace(/>/g, "&gt;");
      div.innerHTML = `<span class="ts">${ts()}</span> <span class="${cls}">${escapedText}</span>`;
      consoleEl.appendChild(div);
      consoleEl.scrollTop = consoleEl.scrollHeight;
    }

    function enableButtons(enable){
      $$(".neo").forEach(btn => btn.disabled = !enable);
    }

    async function runScan(){
      const url = targetInput.value.trim();
      if(!url || (!url.startsWith('http://') && !url.startsWith('https://'))){
        addLine("ERROR: Please enter a valid URL (http:// or https://)", "crit");
        return;
      }

      consoleEl.innerHTML = "";
      stateEl.textContent = "SCANNING";
      executeBtn.disabled = true;
      enableButtons(false);
      
      addLine(`SCANNING: ${url}`, "ok");
      addLine("Please wait, this may take a few moments...", "hint");

      try {
        const response = await fetch('/api/scan', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({url: url})
        });

        const data = await response.json();
        
        if(data.error){
          addLine(`ERROR: ${data.error}`, "crit");
          stateEl.textContent = "ERROR";
        } else {
          currentResult = data;
          addLine("SCAN COMPLETE", "ok");
          addLine(`Title: ${data.http.metadata.title || 'N/A'}`, "");
          
          // Show vulnerabilities
          data.vulns.forEach(v => {
            if(v.includes('CRITICAL')){
              addLine(v, "crit");
            } else if(v.includes('HIGH') || v.includes('MEDIUM')){
              addLine(v, "med");
            } else if(v.includes('LOW')){
              addLine(v, "low");
            } else {
              addLine(v, "");
            }
          });
          
          stateEl.textContent = "DONE";
          enableButtons(true);
        }
      } catch(err) {
        addLine(`NETWORK ERROR: ${err.message}`, "crit");
        stateEl.textContent = "ERROR";
      } finally {
        executeBtn.disabled = false;
      }
    }

    function showPanel(action){
      if(!currentResult){
        addLine("No scan results available. Run a scan first.", "hint");
        return;
      }

      consoleEl.innerHTML = "";
      
      switch(action){
        case 'msf':
          addLine("=== METASPLOIT REPORT ===", "ok");
          currentResult.msf_report.split('\n').forEach(line => addLine(line, ""));
          break;
          
        case 'audit':
          addLine("=== AUDIT COMMANDS ===", "ok");
          currentResult.audit_cmds.forEach(cmd => addLine(cmd, "hint"));
          break;
          
        case 'diff':
          addLine("=== CONTENT DIFF ===", "ok");
          currentResult.diff_data.forEach(line => addLine(line, ""));
          break;
          
        case 'nmap':
          addLine("=== NMAP PORT SCAN ===", "ok");
          if(currentResult.ports.length > 0){
            currentResult.ports.forEach(port => addLine(port, ""));
          } else {
            addLine("No open ports detected", "low");
          }
          break;
          
        case 'subs':
          addLine("=== SUBDOMAIN SCAN ===", "ok");
          if(currentResult.subdomains.length > 0){
            currentResult.subdomains.forEach(sub => addLine(sub, ""));
          } else {
            addLine("No subdomains discovered", "low");
          }
          break;
          
        case 'brute':
          addLine("=== SCANNER COMMANDS ===", "ok");
          currentResult.audit_cmds.forEach(cmd => addLine(cmd, "hint"));
          break;
          
        case 'intel':
          addLine("=== SITE INTELLIGENCE ===", "ok");
          const m = currentResult.http.metadata;
          addLine(`Title: ${m.title || 'N/A'}`, "");
          addLine(`Description: ${m.description || 'N/A'}`, "");
          if(m.emails && m.emails.length > 0){
            addLine(`Emails: ${m.emails.join(', ')}`, "");
          }
          addLine(`Security Score: ${currentResult.security.score}/100`, "");
          addLine(`WAF: ${currentResult.waf.join(', ')}`, "");
          break;
          
        case 'http':
          addLine("=== HTTP DATA ===", "ok");
          const h = currentResult.http;
          addLine(`Response Time: ${h.avg_response_time}s`, "");
          addLine(`Jitter: ${h.jitter}s`, "");
          addLine(`Total Links: ${h.links.total} (Int: ${h.links.internal}, Ext: ${h.links.external})`, "");
          addLine("", "");
          addLine("Headers:", "hint");
          Object.entries(h.headers).forEach(([k,v]) => {
            addLine(`${k}: ${v}`, "");
          });
          break;
          
        case 'save':
          downloadReport();
          addLine("Report downloaded!", "ok");
          break;
      }
    }

    function downloadReport(){
      const blob = new Blob([JSON.stringify(currentResult, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `scan_${new Date().getTime()}.json`;
      a.click();
      URL.revokeObjectURL(url);
    }

    $("#execute").addEventListener("click", runScan);

    $$(".neo").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const action = btn.dataset.action;
        showPanel(action);
      });
    });

    addLine("System ready. Enter target URL and click EXECUTE SCAN.", "ok");
  </script>
</body>
</html>
